<!doctype html>
<html lang="ja">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>音声文字起こし</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap"
        rel="stylesheet" />
    <link rel="stylesheet" href="css/sidepanel.css" />
</head>

<body>
    <!-- トースト通知エリア -->
    <div id="toast-container" class="toast-container"></div>

    <div class="container">
        <header>
            <h1>🎤 音声文字起こし</h1>
            <p class="subtitle">このタブの音声をリアルタイム認識</p>
        </header>

        <main>
            <!-- コントロール -->
            <section class="controls">
                <!-- 処理オプション -->
                <div class="processing-options">
                    <h3>処理オプション</h3>
                    <div class="options-grid">
                        <label>
                            <input type="checkbox" id="enable-hiragana" />
                            <span>ひらがな正規化</span>
                        </label>
                        <label>
                            <input type="checkbox" id="enable-translation" />
                            <span>翻訳（日→英）</span>
                        </label>
                    </div>
                    <p class="hint">💡 オフにすると処理が高速化されます</p>
                </div>

                <div class="button-group">
                    <button id="start-button" class="btn btn-primary">開始</button>
                    <button id="stop-button" class="btn btn-secondary" disabled>停止</button>
                </div>
                <div class="button-group">
                    <button id="download-button" class="btn btn-tertiary" disabled>ダウンロード</button>
                </div>

                <div id="status-text" class="status info">準備完了</div>
            </section>

            <!-- 音量メーター -->
            <section class="volume-meter">
                <label>音量:</label>
                <div class="volume-bar-container">
                    <div id="volume-bar" class="volume-bar"></div>
                </div>
            </section>

            <!-- 文字起こし結果 -->
            <section class="transcription-results">
                <h2>文字起こし結果</h2>

                <div class="result-box">
                    <h3>確定テキスト</h3>
                    <div id="confirmed-text" class="text-display confirmed"></div>
                </div>

                <div class="result-box">
                    <h3>暫定テキスト</h3>
                    <div id="tentative-text" class="text-display tentative"></div>
                </div>
            </section>

            <!-- ひらがな正規化 -->
            <section class="hiragana-results" style="display: none;">
                <h2>ひらがな正規化</h2>
                <div id="hiragana-text" class="text-display hiragana"></div>
            </section>

            <!-- 翻訳結果（オプション） -->
            <section id="translation-section" class="translation-results" style="display: none;">
                <h2>翻訳結果</h2>

                <div class="result-box">
                    <h3>確定翻訳</h3>
                    <div id="confirmed-translation" class="text-display translation-confirmed"></div>
                </div>

                <div class="result-box">
                    <h3>暫定翻訳</h3>
                    <div id="tentative-translation" class="text-display translation-tentative"></div>
                </div>
            </section>

            <!-- パフォーマンス情報 -->
            <section class="performance">
                <h2>処理時間</h2>
                <div id="performance-info" class="performance-info"></div>
            </section>
        </main>

        <footer>
            <p>Voice Analyzer API</p>
        </footer>
    </div>

    <script src="js/audio-capture.js"></script>
    <script src="js/websocket-client.js"></script>
    <script src="js/ui-controller.js"></script>
    <script src="sidepanel.js"></script>
</body>

</html>
